# TODO

# What it is

This is a script that adds "texture" (thanks to temperature gradients), so as to get horizontal stripes that "look like wood". 

More pictures and how it works is described on [this blog post](http://www.tridimake.com/2012/10/shades-of-brown-with-wood-filament-via.html) and on the [Thingiverse web page](https://www.thingiverse.com/thing:49276) (the script there might be older but more people is testng it).

# How to

## As a plugin for Cura

*(Tested working with Cura 4.13.1, with Windows + Python3, and Mac OS + Python2)*

* Open your config folder *(Help > Show Configuration Folder)*, and place *"Woodgrain_Cura.py"* into the scripts directory.

* Restart Cura

* Open the Post Processing window (*Extensions > Post Processing > Modify G-Code*), select "Add a Script", and select "Woodgrain Effect". Adjust the parameters if necessary, then close the window.

## As a web service

There is also a very limited web service hosted [here](https://www.tecrd.com/page/liens/stl_wood), but it will often refuse your file because it is too big, or because the server is busy doing something else.

### Options

```
python wood.py --min minTemp --max maxTemp --grain grainSize --file gcodeFile
```

or in brief mode:  

```
python wood.py -i minTemp -a maxTemp -g grainSize -f gcodeFile
```

The effect of the script is to "patch" your gcode file in place (the existing g-code will be modified so keep a backup if you need one).

The parameters and their defaults are:

* ```minTemp``` (float:180) Minimum print temperature (degree C)
* ```maxTemp``` (float:230) Maximum print temperature (degree C)
* ```grainSize``` (float:3.0) Average "wood grain" size (mm)
* ```firstTemp``` (float:0) Starting temperature (degree C, zero to disable)
* ```spikinessPower``` (float:1.0) Relative thickness of light bands (power, >1 to make dark bands sparser)
* ```maxUpward``` (float:0) Instant temperature increase limit, as required by some firmwares (celcius degrees, please)
* ```maxDownward``` (float:0) Instant temperature decrease limit, as required by some firmwares (celcius degrees, please)
* ```zOffset``` (float:0) Vertical shift of the variations, as shown at the end of the gcode file (mm)
* ```skipStartZ``` (float:0) Skip some Z at start of print, i.e. raft height (mm)
* ```scanForZHop``` (int:5) Lines to scan ahead for Z-Hop.  Max 5, 0 to disable.

The ```gcodeFile``` is the only compulsory parameter.  Check the source code for more information.

Initial temperature settings will be overridden by the varying pattern that is generated by this script (a variant of recursive Perlin noise). You can run it multiple times to test different values and generated temperature curve until you like it.  

Higher themperature give darker bands (due to the wood being burnt). Do not let the wood stay too long in your nozzle else you will most probably clog it with carbon!  
Finally, to run it on windows you may want to check the [FAQ here](http://docs.python.org/2/faq/windows.html).

### Ascii art curve

The script adds a vertical ascii-art "curve" at the end of the file, such as the excerpt show below.
It shows the variations of temperature according to the Z height, so you can get an idea of the effect of the parameters without having to print the object.

```
(...)
;WoodGraph: Z 2.800000 @190C | ...................
;WoodGraph: Z 3.000000 @190C | ...................
;WoodGraph: Z 3.200000 @239C | ##################.
;WoodGraph: Z 3.400000 @238C | ##################.
;WoodGraph: Z 3.600000 @237C | #################..
;WoodGraph: Z 3.800000 @234C | ################...
;WoodGraph: Z 4.000000 @231C | ###############....
;WoodGraph: Z 4.200000 @228C | ##############.....
;WoodGraph: Z 4.400000 @225C | #############......
;WoodGraph: Z 4.600000 @223C | ############.......
;WoodGraph: Z 4.800000 @223C | ############.......
;WoodGraph: Z 5.000000 @223C | ############.......
;WoodGraph: Z 5.200000 @225C | #############......
;WoodGraph: Z 5.400000 @228C | ##############.....
;WoodGraph: Z 5.600000 @231C | ###############....
;WoodGraph: Z 5.800000 @235C | #################..
;WoodGraph: Z 6.000000 @190C | ...................
;WoodGraph: Z 6.200000 @194C | #..................
;WoodGraph: Z 6.400000 @197C | ##.................
;WoodGraph: Z 6.600000 @200C | ####...............
;WoodGraph: Z 6.800000 @203C | ####...............
;WoodGraph: Z 7.000000 @203C | #####..............
;WoodGraph: Z 7.200000 @202C | ####...............
;WoodGraph: Z 7.400000 @200C | ###................
;WoodGraph: Z 7.600000 @196C | ##.................
;WoodGraph: Z 7.800000 @191C | ...................
;WoodGraph: Z 8.000000 @236C | #################..
;WoodGraph: Z 8.200000 @230C | ###############....
;WoodGraph: Z 8.400000 @226C | #############......
;WoodGraph: Z 8.600000 @222C | ############.......
;WoodGraph: Z 8.800000 @219C | ###########........
(...)
```

# Bugs and caveat

Bug: some people reported UTF8 issues when running Python3 on Windows. Do not run Python3 or better, do not run Windows and you will be good :-D More seriously I may fix the bug one day, but I really want to be compatible with both versions of windows (ref.: http://stackoverflow.com/questions/10971033/backporting-python-3-openencoding-utf-8-to-python-2 )

